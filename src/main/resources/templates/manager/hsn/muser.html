<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=no,
    width=device-width,initial-scale=1.0"/>
    <meta charset="UTF-8">
    <title>学员管理</title>
    <link rel="shortcut icon" type="image/x-icon"
          href="/yoga/image/icon.png"/>
    <link rel="stylesheet"
          href="/yoga/hsn/bootstrap-4.1.3/css/bootstrap.min.css">
    <script src="/yoga/js/jquery.1.9.1.js"></script>
    <script src="/yoga/hsn/bootstrap-4.1.3/js/bootstrap.min.js"></script>
    <style>
        table {

            border-collapse: collapse;

            margin: 0 auto;

            text-align: center;

        }

        table td, table th {

            border: 1px solid #cad9ea;

            color: #666;

            height: 30px;

        }

        table thead th {

            background-color: #CCE8EB;

            width: 100px;

        }

        table tr:nth-child(odd) {

            background: #fff;

        }

        table tr:nth-child(even) {

            background: #F5FAFA;

        }
    </style>
    <script th:src="@{/js/jquery.min.js}"></script>
</head>
<body>

<div>学员昵称:<input type="text" name="netname" id="netname"></div>
<div>真实姓名:<input type="text" name="realname" id="realname"></div>
<div>手机号码:<input type="text" name="realname" id="phoneNumber"></div>
<div>QQ号码:<input type="text" name="realname" id="qq"></div>
    <div onclick="shearch()"><input type="submit" value="确认"></div>

<div>
    <table id="user" border="1">

    </table>
</div>

<div class="row">
    <div style="width: 400px !important; height: 60px;margin: auto;">
        <div class="wrap">
            <div class="fenye">
                <ul>
                    <li id="first" onclick="showusers(1)">首页</li>
                    <li id="top" onclick="lastpage()">上一页</li>
                    <li class="xifenye" id="xifenye"><span id="currentpage">1</span>/
                        <span id="totalpage">8</span>
                    <li id="down" onclick="nextpage()">下一页</li>
                    <li id="last" onclick="endPage()">末页</li>
                </ul>

            </div>
        </div>
    </div>
</div>

<script>
    
    function shearch() {
        $.ajax({
            url: "/yoga/user/shearch",
            type: "post",
            async: true,
            data:{
                netname:$("#netname").val(),
                realname:$("#realname").val(),
                phoneNumber:$("#phoneNumber").val(),
                qq:$("#qq").val()
            },
            dataType:"json",
            success:function (message) {
                alert(message);
                var content = "<tr>" +
                    "<td>学员昵称</td>" +
                    "<td>真实姓名</td>" +
                    "<td>学员手机</td>" +
                    "<td>学员QQ</td>" +
                    "<td>余额</td>" +
                    "</tr>";
                for (var i = 0; i < message.length; i++) {
                    var user = message[i];
                    content += "<tr>" + "<td><a href='/yoga/user/userdetail?uId=" + user.uId + "'>" + user.netName + "</a></td>" +
                        "<td>" + user.realName + "</td>" +
                        "<td>" + user.phoneNumber + "</td>" +
                        "<td>" + user.qq + "</td>" +
                        "<td>" + user.balance + "</td>" +
                        "<td><a href='/yoga/user/deluser?uId=" + user.uId + "'>删除学员</a></td>" +
                        "<tr>"

                }
                // $("#currentpage").html(vpage);
                $("#user").html(content);

            }
        })
    }

    function showusers(vpage) {
        $.ajax({
            url: "/yoga/user/showuser",
            type: "post",
            async: true,
            data: {
                page: vpage
            },
            success: function (message) {
                var content = "<tr>" +
                    "<td>学员昵称</td>" +
                    "<td>真实姓名</td>" +
                    "<td>学员手机</td>" +
                    "<td>学员QQ</td>" +
                    "<td>余额</td>" +
                    "</tr>";
                for (var i = 0; i < message.length; i++) {
                    var user = message[i];
                    content += "<tr>" + "<td><a href='/yoga/user/userdetail?uId=" + user.uId + "'>" + user.netName + "</a></td>" +
                        "<td>" + user.realName + "</td>" +
                        "<td>" + user.phoneNumber + "</td>" +
                        "<td>" + user.qq + "</td>" +
                        "<td>" + user.balance + "</td>" +
                        "<td><a href='/yoga/user/deluser?uId=" + user.uId + "'>删除学员</a></td>" +
                        "<tr>"

                }
                $("#currentpage").html(vpage);
                $("#user").html(content);


            }
        });
    }
showusers(1);
    function lastpage() {
        var current=$("#currentpage").html();
        var currentPage=parseInt(current);

        if(currentPage > 1){
            showusers(currentPage - 1);
        }
    }
    function nextpage() {
        var current=$("#currentpage").html();
        var currentPage=parseInt(current);
        var total=$("#totalpage").html();
        var totalPage=parseInt(total);
        showusers(currentPage + 1);
    }

</script>
</body>
</html>